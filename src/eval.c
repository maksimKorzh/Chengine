#include "chengine.h"

const int materialWeight[15] = 
{
	0, 100, 350, 350, 525, 1000, 10000, 0,
	0, -100, -350, -350, -525, -1000, -10000
};


const int whitePawns[128] = 
{
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
  -10, -10, -10, -10, -10, -10, -10, -10,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,  10,  10,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,  25,  25,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
    0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0
};

const int whiteKnights[128] = 
{
	0, -10,   0,   0,   0,   0, -10,   0,   0, 0, 0, 0, 0, 0, 0, 0,
    0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,  20,   0,   0,  20,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,  25,  25,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,  30,  30,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,  10,   0,   0,   0,   0,  10,   0,   0, 0, 0, 0, 0, 0, 0, 0,
    0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0
};

const int whiteBishops[128] = 
{
	0,   0, -10,   0,   0, -10,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
    0,  10,   0,   0,   0,   0,  10,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,  20,   0,   0,  20,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,  15,   0,   0,   0,   0,  15,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
    0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0
};

const int whiteKings[128] = 
{
	0,   0,  20,   0, -10,   0,  30,   0,   0, 0, 0, 0, 0, 0, 0, 0,
    0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
    0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0
};


const int blackPawns[128] = 
{
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0, -25, -25,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0, -10, -10,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
   10,  10,  10,  10,  10,  10,  10,  10,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0
};

const int blackKnights[128] = 
{
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
    0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0, -10,   0,   0,   0,   0, -10,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0, -30, -30,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0, -25, -25,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0, -20,   0,   0, -20,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
    0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,  10,   0,   0,   0,   0,  10,   0,   0, 0, 0, 0, 0, 0, 0, 0
};

const int blackBishops[128] = 
{
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
    0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0, -15,   0,   0,   0,   0, -15,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0, -20,   0,   0, -20,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
    0, -10,   0,   0,   0,   0, -10,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,  10,   0,   0,  10,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0
};

const int blackKings[128] = 
{
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
    0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
    0,   0,   0,   0,   0,   0,   0,   0,   0, 0, 0, 0, 0, 0, 0, 0,
	0,   0, -20,   0,  10,   0, -30,   0,   0, 0, 0, 0, 0, 0, 0, 0
};


int EvaluatePosition(CHESSBOARD *board)
{
	int score = 0;
	
	// count material
	for(int sq = 0; sq < 128; ++sq)
	{
		if(!(sq & 0x88))
		{
			if(board->position[sq])
			{
				int piece = board->position[sq];
				score += materialWeight[piece];
				
				switch(board->position[sq])
				{
					case wP:
						score += whitePawns[sq];
						break;
						
					case wN:
						score += whiteKnights[sq];
						break;
						
					case wB:
						score += whiteBishops[sq];
						break;
						
					case wK:
						score += whiteKings[sq];
						break;
						
						
					case bP:
						score += blackPawns[sq];
						break;
						
					case bN:
						score += blackKnights[sq];
						break;
						
					case bB:
						score += blackBishops[sq];
						break;
						
					case bK:
						score += blackKings[sq];
						break;
				}
			}
		}
	}
	
	if(board->side == white)
		return score;
		
	else
		return -score;
}
